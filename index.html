<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>7-Gaben-HÃ¼gel â€¢ Emergent Freiheits-Engine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
    <style>
        body { background: radial-gradient(ellipse at center, #0f0f23 0%, #000 100%); color: #e0e0e0; }
        #gameCanvas { border: 3px solid #eab308; box-shadow: 0 0 60px #eab308; }
        .glow { text-shadow: 0 0 25px #eab308; animation: pulse 2s infinite; }
        @keyframes pulse { 50% { opacity: 0.6; } }
        iframe { border-radius: 16px; box-shadow: 0 0 40px rgba(234,179,8,0.6); }
        .entdecker { display: none; }
    </style>
</head>
<body class="min-h-screen font-sans">

  <!-- Navbar -->
  <nav class="bg-black/90 border-b border-yellow-500/50 sticky top-0 z-50">
    <div class="max-w-6xl mx-auto px-6 py-4 flex justify-between">
      <div class="flex items-center gap-3">
        <i class="fa-solid fa-staff-snake text-3xl text-yellow-400 glow"></i>
        <span class="text-2xl font-bold text-yellow-400">ROSARY<span class="text-white">-mom</span></span>
      </div>
      <div class="text-yellow-400/70">7-Gaben-HÃ¼gel â€¢ Entdecker-Modus</div>
    </div>
  </nav>

  <!-- Hero + Score -->
  <header class="max-w-6xl mx-auto px-6 py-16 text-center">
    <h1 class="text-6xl font-bold glow mb-4">7-Gaben-HÃ¼gel</h1>
    <p class="text-2xl text-yellow-200">Emergent Freiheits-Engine mit RosenkranzÂ©Â®â„¢</p>
    <div class="mt-8 bg-black/70 border border-yellow-500/50 rounded-3xl p-8 max-w-md mx-auto">
      <p class="text-3xl">VELOLoop Score</p>
      <p id="velo-score" class="text-6xl font-bold text-emerald-400">700</p>
    </div>
  </header>

  <!-- HÃ¼gel Canvas -->
  <section class="max-w-6xl mx-auto px-6 py-12">
    <canvas id="gameCanvas" width="1200" height="800" class="mx-auto block rounded-3xl"></canvas>
  </section>

  <!-- ReverbNation Widget (neuer, funktionierender Code) -->
  <section class="max-w-6xl mx-auto px-6 py-16 bg-black/60">
    <h2 class="text-4xl font-bold text-yellow-400 text-center mb-8 glow">Erkennungssong â€¢ Rosary</h2>
    <iframe width="100%" height="520" scrolling="no" frameborder="no"
            src="https://www.reverbnation.com/widget_code/html_widget/artist_41970?widget_id=55&pwc[included_songs]=1&context_type=page_object"
            style="width:100%;min-width:100%;max-width:100%;"></iframe>
  </section>

  <!-- Entdecker-Modus (wird nach erster Gabe freigeschaltet) -->
  <section id="entdecker-section" class="entdecker max-w-6xl mx-auto px-6 py-20 bg-zinc-900/50">
    <h2 class="text-4xl font-bold text-yellow-400 text-center mb-12">Entdecker-Modus â€¢ Charismata</h2>
    <div id="charisma-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
  </section>

  <!-- Footer -->
  <footer class="bg-black/90 py-12 text-center text-yellow-400/50">
    <p>github.com/Rosary-mom/7-Gaben-Huegel â€¢ Canva-fÃ¤hig</p>
  </footer>

  <!-- Audio -->
  <audio id="bell" src="https://freesound.org/data/previews/276/276951_5123854-lq.mp3"></audio>
  <audio id="jingle" src="https://freesound.org/data/previews/387/387186_7253084-lq.mp3"></audio>

  <script>
    // === HÃ¼gel-Game (wie vorher) ===
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    let gameData = { player: { total_grace: 700, level: 1, found: 0 }, progress: [] };

    const gifts = [ /* deine 7 Stationen */ 
      {id:"weisheit", name:"Weisheit", icon:"ðŸ•Šï¸", bonus:15, x:200, y:400},
      {id:"einsicht", name:"Einsicht", icon:"ðŸ“–", bonus:12, x:400, y:200},
      {id:"rat", name:"Rat", icon:"ðŸ—£ï¸", bonus:10, x:600, y:150},
      {id:"staerke", name:"StÃ¤rke", icon:"ðŸ’ª", bonus:18, x:800, y:250},
      {id:"erkenntnis", name:"Erkenntnis", icon:"ðŸ”", bonus:14, x:900, y:450},
      {id:"froemmigkeit", name:"FrÃ¶mmigkeit", icon:"ðŸ™", bonus:11, x:700, y:650},
      {id:"gottesfurcht", name:"Gottesfurcht", icon:"ðŸŒŸ", bonus:20, x:350, y:700}
    ];

    function renderHÃ¼gel() { /* dein alter Canvas-Code â€“ einfach hier einfÃ¼gen */ 
      ctx.fillStyle = '#0a0a1f'; ctx.fillRect(0,0,1200,800);
      // Pfad + Stationen (wie in der letzten Version)
      // ... (kopiere den render-Block aus der vorherigen Nachricht)
    }

    function activateGift(id) {
      if (gameData.progress.includes(id)) return;
      const gift = gifts.find(g => g.id === id);
      gameData.progress.push(id);
      gameData.player.total_grace += gift.bonus;
      gameData.player.found++;

      document.getElementById('bell').play();
      if (gameData.player.found === 7) document.getElementById('jingle').play();

      renderHÃ¼gel();
      document.getElementById('velo-score').textContent = gameData.player.total_grace;

      // Entdecker-Modus freischalten
      if (gameData.player.found >= 1) {
        document.getElementById('entdecker-section').classList.remove('entdecker');
        loadCharismaGrid();
      }
    }

    canvas.addEventListener('click', e => { /* dein Click-Handler */ });

    // === Charisma-Grid (Entdecker-Modus) ===
    async function loadCharismaGrid() {
      const container = document.getElementById('charisma-grid');
      container.innerHTML = '';

      let data = [];
      try {
        const res = await fetch('charismata_data.json');
        if (res.ok) data = (await res.json()).charismata;
      } catch(e) {
        data = [ /* fallback 7 Gaben */ ];
      }

      data.forEach(gift => {
        const active = gameData.progress.includes(gift.id);
        const card = document.createElement('div');
        card.className = `p-8 rounded-3xl border ${active ? 'border-emerald-400 bg-emerald-900/30' : 'border-yellow-500/30 bg-zinc-900/80'}`;
        card.innerHTML = `
          <div class="text-6xl mb-6">${gift.icon || 'âœ¨'}</div>
          <h3 class="text-3xl font-bold">${gift.name_de}</h3>
          <p class="text-sm text-yellow-300 mt-4">${gift.description || gift.source_text}</p>
          <div class="mt-6 text-emerald-400 font-bold">+${gift.stats.grace_bonus} Grace</div>
        `;
        container.appendChild(card);
      });
    }

    window.onload = () => {
      renderHÃ¼gel();
      document.getElementById('velo-score').textContent = gameData.player.total_grace;
    };
  </script>
</body>
</html>
